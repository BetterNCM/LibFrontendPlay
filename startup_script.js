(() => {
  // src/utils.ts
  function createHookFn(fn, prefixs, postfixs) {
    return function(...args) {
      if (prefixs instanceof Function)
        prefixs = [prefixs];
      if (postfixs instanceof Function)
        postfixs = [postfixs];
      let prefixResult = {
        cancel: false,
        args: void 0
      };
      let callArgs;
      for (const prefix of prefixs ?? []) {
        prefixResult = prefix(...args);
        if (prefixResult?.cancel)
          return;
        if (prefixResult?.args)
          callArgs = callArgs ?? prefixResult?.args;
      }
      if (callArgs)
        console.log(callArgs, args);
      let result;
      result = fn.apply(this, callArgs ?? args);
      for (const postfix of postfixs ?? []) {
        result = postfix?.apply(result, args) ?? result;
      }
      return result;
    };
  }

  // src/startup_script.ts
  var registeredCalls = {};
  window["registeredCalls"] = registeredCalls;
  channel.registerCall = createHookFn(channel.registerCall, (key, fn) => {
    registeredCalls[key] ??= [];
    registeredCalls[key].push(fn);
  });
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3V0aWxzLnRzIiwgInNyYy9zdGFydHVwX3NjcmlwdC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhvb2tGbihcclxuXHRmbjogRnVuY3Rpb24sXHJcblx0cHJlZml4cz86IEZ1bmN0aW9uIHwgRnVuY3Rpb25bXSxcclxuXHRwb3N0Zml4cz86IEZ1bmN0aW9uIHwgRnVuY3Rpb25bXSxcclxuKTogRnVuY3Rpb24ge1xyXG5cdHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xyXG5cdFx0aWYgKHByZWZpeHMgaW5zdGFuY2VvZiBGdW5jdGlvbikgcHJlZml4cyA9IFtwcmVmaXhzXTtcclxuXHRcdGlmIChwb3N0Zml4cyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSBwb3N0Zml4cyA9IFtwb3N0Zml4c107XHJcblxyXG5cdFx0bGV0IHByZWZpeFJlc3VsdCA9IHtcclxuXHRcdFx0Y2FuY2VsOiBmYWxzZSxcclxuXHRcdFx0YXJnczogdW5kZWZpbmVkXHJcblx0XHR9O1xyXG5cclxuXHRcdGxldCBjYWxsQXJncztcclxuXHJcblx0XHRmb3IgKGNvbnN0IHByZWZpeCBvZiBwcmVmaXhzID8/IFtdKSB7XHJcblx0XHRcdHByZWZpeFJlc3VsdCA9IHByZWZpeCguLi5hcmdzKTtcclxuXHRcdFx0aWYgKHByZWZpeFJlc3VsdD8uY2FuY2VsKSByZXR1cm47XHJcblx0XHRcdGlmIChwcmVmaXhSZXN1bHQ/LmFyZ3MpIGNhbGxBcmdzID0gY2FsbEFyZ3MgPz8gcHJlZml4UmVzdWx0Py5hcmdzO1xyXG5cdFx0fVxyXG5cdFx0aWYoY2FsbEFyZ3MpY29uc29sZS5sb2coY2FsbEFyZ3MsYXJncylcclxuXHRcdGxldCByZXN1bHQ7XHJcblx0XHRyZXN1bHQgPSBmbi5hcHBseSh0aGlzLCBjYWxsQXJncyA/PyBhcmdzKTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IHBvc3RmaXggb2YgcG9zdGZpeHMgPz8gW10pIHtcclxuXHRcdFx0cmVzdWx0ID0gcG9zdGZpeD8uYXBwbHkocmVzdWx0LCBhcmdzKSA/PyByZXN1bHQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9O1xyXG59XHJcbiIsICIvKipcclxuICogQGZpbGVvdmVydmlld1xyXG4gKiBcdTZCNjRcdTU5MDRcdTc2ODRcdTgxMUFcdTY3MkNcdTVDMDZcdTU3MjhcdTdGNTFcdTY2MTNcdTRFOTFcdTc2ODRcdTdBOTdcdTUzRTNcdTUzQ0FcdTZENEZcdTg5QzhcdTU2NjhcdTk4NzVcdTk3NjJcdTUyMURcdTU5Q0JcdTUzMTZcdTY1RjZcdTg4QUJcdThDMDNcdTc1MjhcclxuICogXHU2NjJGXHU2NzAwXHU1MTQ4XHU1RjAwXHU1OUNCXHU2MjY3XHU4ODRDXHU3Njg0XHU4MTFBXHU2NzJDXHJcbiAqIFx1NjI0MFx1NEVFNVx1NEUwRFx1NUI1OFx1NTcyOFx1NEVGQlx1NEY1NVx1NjNEMlx1NEVGNlx1NEY5RFx1OEQ1Nlx1NTQ4QyBCZXR0ZXJOQ00gQVBJXHJcbiAqIFx1NTk4Mlx1Njc5Q1x1NEY2MFx1NzY4NFx1NjNEMlx1NEVGNlx1NTNFRlx1NEVFNVx1NTcyOFx1NjNEMlx1NEVGNlx1N0JBMVx1NzQwNlx1NTY2OFx1NTJBMFx1OEY3RFx1NEY2MFx1NzY4NFx1NjNEMlx1NEVGNlx1NjcxRlx1OTVGNFx1NUI4Q1x1NjIxMFx1OTcwMFx1ODk4MVx1NzY4NFx1NjRDRFx1NEY1Q1xyXG4gKiBcdThCRjdcdTVDM0RcdTkxQ0ZcdTRFMERcdTg5ODFcdTRGN0ZcdTc1MjhcdTY3MkNcdTgxMUFcdTY3MkNcdTY3NjVcdTUyQTBcdThGN0RcdTRFMUNcdTg5N0ZcdUZGMENcdTU0MjZcdTUyMTlcdTRGMUFcdTU5MjdcdTVFNDVcdTVFQTZcdTVGNzFcdTU0Q0RcdTUyQTBcdThGN0RcdTkwMUZcdTVFQTZcclxuICogXHU1NDBDXHU2NUY2XHU0RTVGXHU0RTBEXHU4OTgxXHU1QzFEXHU4QkQ1XHU0RkI1XHU1MTY1XHU2MDI3XHU1OTI3XHU3Njg0XHU2NENEXHU0RjVDXHVGRjBDXHU5MDdGXHU1MTREXHU3RjUxXHU2NjEzXHU0RTkxXHU1RDI5XHU2RTgzXHU3NTFBXHU4MUYzXHU2NUUwXHU2Q0Q1XHU2MjUzXHU1RjAwXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgY3JlYXRlSG9va0ZuIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbnZhciByZWdpc3RlcmVkQ2FsbHMgPSB7fTtcclxud2luZG93W1wicmVnaXN0ZXJlZENhbGxzXCJdPXJlZ2lzdGVyZWRDYWxscztcclxuY2hhbm5lbC5yZWdpc3RlckNhbGwgPSBjcmVhdGVIb29rRm4oY2hhbm5lbC5yZWdpc3RlckNhbGwsIChrZXksIGZuKSA9PiB7XHJcbiAgICByZWdpc3RlcmVkQ2FsbHNba2V5XT8/PVtdXHJcbiAgICByZWdpc3RlcmVkQ2FsbHNba2V5XS5wdXNoKGZuKTtcclxufSkiXSwKICAibWFwcGluZ3MiOiAiOztBQUFPLFdBQVMsYUFDZixJQUNBLFNBQ0EsVUFDVztBQUNYLFdBQU8sWUFBYSxNQUFNO0FBQ3pCLFVBQUksbUJBQW1CO0FBQVUsa0JBQVUsQ0FBQyxPQUFPO0FBQ25ELFVBQUksb0JBQW9CO0FBQVUsbUJBQVcsQ0FBQyxRQUFRO0FBRXRELFVBQUksZUFBZTtBQUFBLFFBQ2xCLFFBQVE7QUFBQSxRQUNSLE1BQU07QUFBQSxNQUNQO0FBRUEsVUFBSTtBQUVKLGlCQUFXLFVBQVUsV0FBVyxDQUFDLEdBQUc7QUFDbkMsdUJBQWUsT0FBTyxHQUFHLElBQUk7QUFDN0IsWUFBSSxjQUFjO0FBQVE7QUFDMUIsWUFBSSxjQUFjO0FBQU0scUJBQVcsWUFBWSxjQUFjO0FBQUEsTUFDOUQ7QUFDQSxVQUFHO0FBQVMsZ0JBQVEsSUFBSSxVQUFTLElBQUk7QUFDckMsVUFBSTtBQUNKLGVBQVMsR0FBRyxNQUFNLE1BQU0sWUFBWSxJQUFJO0FBRXhDLGlCQUFXLFdBQVcsWUFBWSxDQUFDLEdBQUc7QUFDckMsaUJBQVMsU0FBUyxNQUFNLFFBQVEsSUFBSSxLQUFLO0FBQUEsTUFDMUM7QUFFQSxhQUFPO0FBQUEsSUFDUjtBQUFBLEVBQ0Q7OztBQ25CQSxNQUFJLGtCQUFrQixDQUFDO0FBQ3ZCLFNBQU8saUJBQWlCLElBQUU7QUFDMUIsVUFBUSxlQUFlLGFBQWEsUUFBUSxjQUFjLENBQUMsS0FBSyxPQUFPO0FBQ25FLG9CQUFnQixHQUFHLE1BQUksQ0FBQztBQUN4QixvQkFBZ0IsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUFBLEVBQ2hDLENBQUM7IiwKICAibmFtZXMiOiBbXQp9Cg==
